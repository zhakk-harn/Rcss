<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>R.css</title>
    <link rel="stylesheet" href="R.css" />
    <style>
      :root {
        --shadow-color: 0deg 0% 0%;
        --shadow-elevation-low: -0.6px 0px 0.7px hsl(var(--shadow-color) / 0.1),
          -1px 0.1px 1.1px -1.2px hsl(var(--shadow-color) / 0.1),
          -2.5px 0.2px 2.8px -2.5px hsl(var(--shadow-color) / 0.1);
        --shadow-elevation-medium: -0.6px 0px 0.7px
            hsl(var(--shadow-color) / 0.11),
          -2px 0.1px 2.3px -0.8px hsl(var(--shadow-color) / 0.11),
          -5.1px 0.3px 5.7px -1.7px hsl(var(--shadow-color) / 0.11),
          -12.4px 0.8px 14px -2.5px hsl(var(--shadow-color) / 0.11);
        --shadow-elevation-high: -0.6px 0px 0.7px hsl(var(--shadow-color) / 0.1),
          -3.6px 0.2px 4.1px -0.4px hsl(var(--shadow-color) / 0.1),
          -6.8px 0.4px 7.7px -0.7px hsl(var(--shadow-color) / 0.1),
          -11.1px 0.7px 12.5px -1.1px hsl(var(--shadow-color) / 0.1),
          -17.8px 1.1px 20.1px -1.4px hsl(var(--shadow-color) / 0.1),
          -27.8px 1.7px 31.3px -1.8px hsl(var(--shadow-color) / 0.1),
          -42.2px 2.6px 47.6px -2.1px hsl(var(--shadow-color) / 0.1),
          -62.1px 3.9px 70px -2.5px hsl(var(--shadow-color) / 0.1);
      }

      #config {
        position: fixed;
        right: 0;
        top: 0;

        width: calc((100% - 75ch) / 2);
        height: 100vh;
        overflow: auto;

        box-shadow: var(--shadow-elevation-medium);

        color: black;
        background-color: white;

        padding: 1rem;
      }

      #close-config,
      #open-config {
        position: fixed;
        right: 1rem;
        top: 1rem;
      }
    </style>
  </head>
  <body>
    <header>
      <hgroup>
        <h1>R.css</h1>
        <p>A tastefully classless CSS framework</p>
      </hgroup>
    </header>
    <aside>
      <ul>
        <li><a href="#what">What?</a></li>
        <li><a href="#how">How?</a></li>
      </ul>
    </aside>
    <main>
      <section>
        <h2 id="what">What is that?</h2>
        <p>
          R.css (a.k.a big 'r' CSS) gives you good defaults so you only have to
          write the HTML. And even then, there are
          <a href="https://github.com/remarkjs/remark-rehype">more</a> or
          <a href="https://github.com/markedjs/marked">less</a> complicated
          solutions to generate HTML from mardown.
        </p>
      </section>
      <section>
        <h2 id="how">How do I use it?</h2>
        <p>Here is what it does <a href="nowhere">astnehusaneth</a></p>
      </section>
      <section id="others">
        <h2>Others</h2>
        <p>Here is a list of other minimal CSS framework I like</p>
        <ul>
          <li><a href="https://oxal.org/projects/sakura/">sakura</a></li>
          <li><a href="https://simplecss.org/">Simple.css</a></li>
        </ul>
      </section>
      <section id="others">
        <h2>Others</h2>
        <p>Here is a list of other minimal CSS framework I like</p>
        <ul>
          <li><a href="https://oxal.org/projects/sakura/">sakura</a></li>
          <li><a href="https://simplecss.org/">Simple.css</a></li>
        </ul>
      </section>
      <section id="others">
        <h2>Others</h2>
        <p>Here is a list of other minimal CSS framework I like</p>
        <ul>
          <li><a href="https://oxal.org/projects/sakura/">sakura</a></li>
          <li><a href="https://simplecss.org/">Simple.css</a></li>
        </ul>
      </section>
      <section id="others">
        <h2>Others</h2>
        <p>Here is a list of other minimal CSS framework I like</p>
        <ul>
          <li><a href="https://oxal.org/projects/sakura/">sakura</a></li>
          <li><a href="https://simplecss.org/">Simple.css</a></li>
        </ul>
      </section>
      <section id="others">
        <h2>Others</h2>
        <p>Here is a list of other minimal CSS framework I like</p>
        <ul>
          <li><a href="https://oxal.org/projects/sakura/">sakura</a></li>
          <li><a href="https://simplecss.org/">Simple.css</a></li>
        </ul>
      </section>
    </main>
    <footer>legal mentions</footer>
    <button id="open-config">open</button>
    <div id="config">
      <button id="close-config">close</button>
      <hgroup>
        <h1>Configurator</h1>
      </hgroup>

      <section>
        <label for="light-theme"><h2>Light Theme</h2></label>
        <select name="light-theme" id="light-theme"></select>
        <label for="dark-theme"><h2>Dark Theme</h2></label>
        <select name="dark-theme" id="dark-theme"></select>
        <label for="theme-toggler"><h2>Previewing dark theme</h2></label>
        <input type="checkbox" name="theme-toggler" id="theme-toggler" />
      </section>
      <section>
        <h2><label for="font-stack">Font stack</label></h2>
        <select name="font-stack" id="font-stack"></select>
        <p>
          These come from the
          <a href="https://modernfontstacks.com/">Modern Font Stacks project</a>
        </p>
      </section>
      <section>
        <h2>Download</h2>
        <button id="download-btn">download</button>
      </section>
    </div>

    <script>
      const configurator = document.querySelector("#config");
      const defaultConfigDisplay = getComputedStyle(configurator)["display"];

      document.querySelector("#open-config").addEventListener("click", () => {
        configurator.style["display"] = defaultConfigDisplay;
      });
      document.querySelector("#close-config").addEventListener("click", () => {
        configurator.style["display"] = "none";
      });

      const lightThemeSelect = document.querySelector("#light-theme");
      const darkThemeSelect = document.querySelector("#dark-theme");
      const themeToggler = document.querySelector("#theme-toggler");

      const fontStackSelect = document.querySelector("#font-stack");

      const downloadBtn = document.querySelector("#download-btn");

      const themes = {
        light: [
          {
            name: "R",
            text: "#000000",
            background: "#ffffff",
            primary: "#db4d3f",
            link: "#db4d3f",
            visited: "inherit",
          },
          {
            name: "Dracula",
            text: "#F8F8F2",
            background: "#282A36",
            primary: "#6272A4",
            link: "#FF79C6",
            visited: "#BD93F9",
          },
        ],
        dark: [
          {
            name: "R",
            text: "#ffffff",
            background: "#000000",
            primary: "#db4d3f",
            link: "#db4d3f",
            visited: "inherit",
          },
          {
            name: "Dracula",
            text: "#F8F8F2",
            background: "#282A36",
            primary: "#6272A4",
            link: "#FF79C6",
            visited: "#BD93F9",
          },
        ],
      };

      themes.light.forEach((theme, i) => {
        lightThemeSelect.insertAdjacentHTML(
          "beforeend",
          `<option value="${i}">${theme.name}</option>`
        );
      });
      themes.dark.forEach((theme, i) => {
        darkThemeSelect.insertAdjacentHTML(
          "beforeend",
          `<option value="${i}">${theme.name}</option>`
        );
      });

      lightThemeSelect.addEventListener("input", (ev) => {
        themeToggler.checked = false;
        setDark(false);
        setTheme(false, themes.light[ev.target.value]);
      });
      darkThemeSelect.addEventListener("input", (ev) => {
        themeToggler.checked = true;
        setDark(true);
        setTheme(true, themes.dark[ev.target.value]);
      });

      function setTheme(isDark, theme) {
        Object.entries(theme).forEach(([key, value]) => {
          if (key == "name") {
            return;
          }

          document.documentElement.style.setProperty(
            `--${isDark ? "dark" : "light"}-${key}`,
            value
          );
        });
      }

      setTheme(false, themes.light[0]);
      setTheme(true, themes.dark[0]);

      const systemSettingDark = window.matchMedia(
        "(prefers-color-scheme: dark)"
      ).matches;

      function setDark(bool) {
        document.documentElement.setAttribute("data-dark", bool + "");
      }

      themeToggler.checked = systemSettingDark;
      setDark(systemSettingDark);

      themeToggler.addEventListener("change", (ev) => {
        setDark(ev.target.checked);
      });

      const fonts = {
        "System UI": "system-ui, sans-serif",
        Transitionnal:
          "Charter, 'Bitstream Charter', 'Sitka Text', Cambria, serif",
        "Old Stlye":
          "'Iowan Old Style', 'Palatino Linotype', 'URW Palladio L', P052, serif",
        Humanist:
          "Seravek, 'Gill Sans Nova', Ubuntu, Calibri, 'DejaVu Sans', source-sans-pro, sans-serif",
        "Geometric Humanist":
          "Avenir, Montserrat, Corbel, 'URW Gothic', source-sans-pro, sans-serif",
        "Classical Humanist":
          "Optima, Candara, 'Noto Sans', source-sans-pro, sans-serif",
        "Neo Grotesque":
          "Inter, Roboto, 'Helvetica Neue', 'Arial Nova', 'Nimbus Sans', Arial, sans-serif",
        "Monospace Slab Serif": "'Nimbus Mono PS', 'Courier New', monospace",
        "Monospace Code":
          "ui-monospace, 'Cascadia Code', 'Source Code Pro', Menlo, Consolas, 'DejaVu Sans Mono', monospace",
        Industrial:
          "Bahnschrift, 'DIN Alternate', 'Franklin Gothic Medium', 'Nimbus Sans Narrow', sans-serif-condensed, sans-serif",
        "Rounded Sans":
          "ui-rounded, 'Hiragino Maru Gothic ProN', Quicksand, Comfortaa, Manjari, 'Arial Rounded MT', 'Arial Rounded MT Bold', Calibri, source-sans-pro, sans-serif",
        "Slab Serif":
          "Rockwell, 'Rockwell Nova', 'Roboto Slab', 'DejaVu Serif', 'Sitka Small', serif",
        Antique:
          "Superclarendon, 'Bookman Old Style', 'URW Bookman', 'URW Bookman L', 'Georgia Pro', Georgia, serif",
        Didone:
          "Didot, 'Bodoni MT', 'Noto Serif Display', 'URW Palladio L', P052, Sylfaen, serif",
        Handwritten:
          "'Segoe Print', 'Bradley Hand', Chilanka, TSCu_Comic, casual, cursive",
      };

      Object.entries(fonts).forEach(([key, value]) => {
        fontStackSelect.insertAdjacentHTML(
          "beforeend",
          `<option value="${value}">${key}</option>`
        );
      });

      fontStackSelect.addEventListener("input", (ev) => {
        document.documentElement.style.setProperty("--font", ev.target.value);
      });
      document.documentElement.style.setProperty(
        "--font",
        Object.values(fonts)[0]
      );

      function download(filename, text) {
        let element = document.createElement("a");
        element.setAttribute(
          "href",
          "data:text/plain;charset=utf-8," + encodeURIComponent(text)
        );
        element.setAttribute("download", filename);

        element.style.display = "none";
        document.body.appendChild(element);

        element.click();

        document.body.removeChild(element);
      }

      downloadBtn.addEventListener("click", (ev) => {
        const config =
          ":root{" + document.documentElement.style.cssText + "}\n\n";

        fetch("R.css")
          .then((res) => res.text())
          .then((rcss) => {
            download("R.custom.css", config + rcss);
          });
      });
    </script>
  </body>
</html>

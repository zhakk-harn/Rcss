<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>R.css</title>
    <link rel="stylesheet" href="R.config.css" />
    <link rel="stylesheet" href="R.css" />
    <style>
      /* overwritte specific to the configurator */
      body {
        grid:
          "header	header	config" auto
          "aside	main		config" 1fr
          "footer	footer	config" auto
          / 1fr 75ch 1fr;
      }
      @media screen and (width <= 95ch) {
        body {
          grid:
            "header config" auto
            "main   config" 1fr
            "footer config" auto
            / 1fr;
        }
        aside {
          display: none;
        }
      }

      #config {
        grid-area: config;
        padding: 1rem;
      }
    </style>
  </head>
  <body>
    <header>
      <hgroup>
        <h1>R.css</h1>
        <p>A tastefully classless CSS framework</p>
      </hgroup>
    </header>
    <aside>
      <ul>
        <li><a href="#what">What?</a></li>
        <li><a href="#how">How?</a></li>
      </ul>
    </aside>
    <main>
      <section>
        <h2 id="what">What is that?</h2>
        <p>
          R.css (a.k.a big 'r' CSS) gives you good defaults so you only have to
          write the HTML. And even then, there are
          <a href="https://github.com/remarkjs/remark-rehype">more</a> or
          <a href="https://github.com/markedjs/marked">less</a> complicated
          solutions to generate HTML from mardown.
        </p>
      </section>
      <section>
        <h2 id="how">How do I use it?</h2>
        <p>Here is what it does <a href="nowhere">astnehusaneth</a></p>
      </section>
      <section id="others">
        <h2>Others</h2>
        <p>Here is a list of other minimal CSS framework I like</p>
        <ul>
          <li><a href="https://oxal.org/projects/sakura/">sakura</a></li>
          <li><a href="https://simplecss.org/">Simple.css</a></li>
        </ul>
      </section>
      <section id="others">
        <h2>Others</h2>
        <p>Here is a list of other minimal CSS framework I like</p>
        <ul>
          <li><a href="https://oxal.org/projects/sakura/">sakura</a></li>
          <li><a href="https://simplecss.org/">Simple.css</a></li>
        </ul>
      </section>
      <section id="others">
        <h2>Others</h2>
        <p>Here is a list of other minimal CSS framework I like</p>
        <ul>
          <li><a href="https://oxal.org/projects/sakura/">sakura</a></li>
          <li><a href="https://simplecss.org/">Simple.css</a></li>
        </ul>
      </section>
      <section id="others">
        <h2>Others</h2>
        <p>Here is a list of other minimal CSS framework I like</p>
        <ul>
          <li><a href="https://oxal.org/projects/sakura/">sakura</a></li>
          <li><a href="https://simplecss.org/">Simple.css</a></li>
        </ul>
      </section>
      <section id="others">
        <h2>Others</h2>
        <p>Here is a list of other minimal CSS framework I like</p>
        <ul>
          <li><a href="https://oxal.org/projects/sakura/">sakura</a></li>
          <li><a href="https://simplecss.org/">Simple.css</a></li>
        </ul>
      </section>
    </main>
    <footer>legal mentions</footer>
    <div id="config">
      <hgroup>
        <h1>Configurator</h1>
        <p>
          This column will not appear in your thing, the footer and the header
          will continue up to the right edge of the screen
        </p>
      </hgroup>

      <section>
        <label for="light-theme"><h2>Light Theme</h2></label>
        <select name="light-theme" id="light-theme"></select>
        <label for="dark-theme"><h2>Dark Theme</h2></label>
        <select name="dark-theme" id="dark-theme"></select>
        <label for="theme-toggler"><h2>Previewing light/dark theme</h2></label>
        <input type="checkbox" name="theme-toggler" id="theme-toggler" />
      </section>
      <section>
        <h2><label for="font-stack">Font stack</label></h2>
        <select name="font-stack" id="font-stack"></select>
        <p>
          These come from the
          <a href="https://modernfontstacks.com/">Modern Font Stacks project</a>
        </p>
      </section>
      <section>
        <h2>Download</h2>
        <button id="download-btn">download</button>
      </section>
    </div>

    <script>
      const lightThemeSelect = document.querySelector("#light-theme");
      const darkThemeSelect = document.querySelector("#dark-theme");
      const themeToggler = document.querySelector("#theme-toggler");

      const fontStackSelect = document.querySelector("#font-stack");

      const downloadBtn = document.querySelector("#download-btn");

      const lightThemes = [
        {
          name: "R",
          primary: "",
          background: "",
        },
        {
          name: "Cobalt",
          primary: "",
          background: "",
        },
      ];

      lightThemes.forEach((theme, i) => {
        lightThemeSelect.insertAdjacentHTML(
          "beforeend",
          `<option value="${i}">${theme.name}</option>`
        );
      });

      lightThemeSelect.addEventListener("input", (ev) => {
        themeToggler.checked = false;
        setDark(false);
        console.log(
          `selected light theme ${JSON.stringify(
            lightThemes[ev.target.value],
            null,
            2
          )}`
        );
      });

      const darkThemes = [
        {
          name: "R",
          primary: "",
          background: "",
        },
      ];

      const systemSettingDark = window.matchMedia(
        "(prefers-color-scheme: dark)"
      ).matches;

      function setDark(bool) {
        document.documentElement.setAttribute("data-dark", bool + "");
      }

      themeToggler.checked = systemSettingDark;
      setDark(systemSettingDark);

      themeToggler.addEventListener("change", (ev) => {
        setDark(ev.target.checked);
      });

      const fonts = {
        "System UI": "system-ui, sans-serif",
        Transitionnal:
          "Charter, 'Bitstream Charter', 'Sitka Text', Cambria, serif",
        "Old Stlye":
          "'Iowan Old Style', 'Palatino Linotype', 'URW Palladio L', P052, serif",
        Humanist:
          "Seravek, 'Gill Sans Nova', Ubuntu, Calibri, 'DejaVu Sans', source-sans-pro, sans-serif",
        "Geometric Humanist":
          "Avenir, Montserrat, Corbel, 'URW Gothic', source-sans-pro, sans-serif",
        "Classical Humanist":
          "Optima, Candara, 'Noto Sans', source-sans-pro, sans-serif",
        "Neo Grotesque":
          "Inter, Roboto, 'Helvetica Neue', 'Arial Nova', 'Nimbus Sans', Arial, sans-serif",
        "Monospace Slab Serif": "'Nimbus Mono PS', 'Courier New', monospace",
        "Monospace Code":
          "ui-monospace, 'Cascadia Code', 'Source Code Pro', Menlo, Consolas, 'DejaVu Sans Mono', monospace",
        Industrial:
          "Bahnschrift, 'DIN Alternate', 'Franklin Gothic Medium', 'Nimbus Sans Narrow', sans-serif-condensed, sans-serif",
        "Rounded Sans":
          "ui-rounded, 'Hiragino Maru Gothic ProN', Quicksand, Comfortaa, Manjari, 'Arial Rounded MT', 'Arial Rounded MT Bold', Calibri, source-sans-pro, sans-serif",
        "Slab Serif":
          "Rockwell, 'Rockwell Nova', 'Roboto Slab', 'DejaVu Serif', 'Sitka Small', serif",
        Antique:
          "Superclarendon, 'Bookman Old Style', 'URW Bookman', 'URW Bookman L', 'Georgia Pro', Georgia, serif",
        Didone:
          "Didot, 'Bodoni MT', 'Noto Serif Display', 'URW Palladio L', P052, Sylfaen, serif",
        Handwritten:
          "'Segoe Print', 'Bradley Hand', Chilanka, TSCu_Comic, casual, cursive",
      };

      Object.entries(fonts).forEach(([key, value]) => {
        fontStackSelect.insertAdjacentHTML(
          "beforeend",
          `<option value="${value}">${key}</option>`
        );
      });

      fontStackSelect.addEventListener("input", (ev) => {
        document.documentElement.style.setProperty("--font", ev.target.value);
      });

      function download(filename, text) {
        let element = document.createElement("a");
        element.setAttribute(
          "href",
          "data:text/plain;charset=utf-8," + encodeURIComponent(text)
        );
        element.setAttribute("download", filename);

        element.style.display = "none";
        document.body.appendChild(element);

        element.click();

        document.body.removeChild(element);
      }

      downloadBtn.addEventListener("click", (ev) => {
        download("R.config.css", "//TODO");
      });
    </script>
  </body>
</html>
